<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contato</title>
</head>
<body>

    <form>
        <input  type="text"   id="nome"     placeholder="Nome Completo"required/>
        <input  type="text"   id="email"    placeholder="E-mail"required/>
        <input  type="text"   id="telefone" placeholder="(11)98888-0000"required/>
        
        <button type="submit" id="btnCadastrar">Cadastrar</button>
        <button type="submit" id="btnRemover"> Remover</button>
    </form>

    <script>

        let contatos = [{
                nome:     'Kailane',
                email:    'Kailaneps@hotmail.com',
                telefone: '(11)90000-8888'
        }]

        //Adionando 
        let btnCadastrar = document.querySelector('#btnCadastrar');
        btnCadastrar.addEventListener('click', cadastrar);

        //Removendo
        let btnRemover = document.querySelector('#btnRemover');
        btnRemover.addEventListener('click', remover);

        //Apartir dos documentos do formulario cria-se um objeto
        let nome     = document.querySelector('#nome');
        let email    = document.querySelector('#email');
        let telefone = document.querySelector('#telefone');

        function listar(){

            //Tabela
            let corpoTabela = document.querySelector('#tabela-listar-corpo');
            // Limpando o tbody da tabela
            corpoTabela.innerHTML = "";

            //Armazenar o tr e td
            let linha, colunaNome, colunaEmail, colunaTelefone;

            contatos.forEach(item => {
                linha = document.createElement('tr');

                colunaNome = document.createElement('td');
                colunaNome.innerText = item.nome;
                linha.appendChild(colunaNome);

                colunaEmail = document.createElement('td');
                colunaEmail = innerText = item.email;
                linha.appendChild(colunaEmail);

                colunaTelefone = document.createElement('td');
                colunaTelefone = innerText = item.telefone;
                linha.appendChild(colunaTelefone);
            })

            limparCampos();
        }

        //Função de Cadastrar
        function cadastrar(event){
            event.preventDefault();

            try {
                let Contato = {
                    nome :     nome.value,
                    email :    email.value,
                    telefone : telefone.value
                }

            contatos.push(contato);

            alert('Contato cadastrado');

            listar();

           } 
            
            catch (error) {
                alert('Ocorreu um erro, entre em contato no email: email@email.com')
            }

        }

        //Função de Excluir
        function remover(event){
            event.preventDefault();

            let index = contatos.findIndex(item => item.email === email.value);
            console.log(index);

            //Excluir
            if(index > -1){
                contatos.slice(index, 1)
                alert('Contato Removido');

                listar();
            } 
            
            else {
                alert('Contato não encontrado');
            }
        }

        //Função
        function limparCampos(){
            nome.value     = "";
            email.value    = "";
            telefone.value = "";

            nome.focus();
        }

    </script>
</body>
</html>